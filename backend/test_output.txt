============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-7.4.3, pluggy-1.6.0 -- /mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/bin/python
cachedir: .pytest_cache
rootdir: /mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/backend
plugins: anyio-3.7.1
collecting ... collected 15 items

tests/integration/test_activities_api.py::TestActivitiesAPI::test_generate_activity_success ERROR [  6%]
tests/integration/test_activities_api.py::TestActivitiesAPI::test_generate_activity_without_auth ERROR [ 13%]
tests/integration/test_activities_api.py::TestActivitiesAPI::test_generate_activity_nonexistent_student ERROR [ 20%]
tests/integration/test_activities_api.py::TestActivitiesAPI::test_generate_activity_invalid_duration ERROR [ 26%]
tests/integration/test_activities_api.py::TestActivitiesAPI::test_generate_multiple_activity_types ERROR [ 33%]
tests/integration/test_auth_api.py::TestAuthAPI::test_register_user_success FAILED [ 40%]
tests/integration/test_auth_api.py::TestAuthAPI::test_register_duplicate_email ERROR [ 46%]
tests/integration/test_auth_api.py::TestAuthAPI::test_login_success ERROR [ 53%]
tests/integration/test_auth_api.py::TestAuthAPI::test_login_invalid_credentials ERROR [ 60%]
tests/integration/test_auth_api.py::TestAuthAPI::test_get_current_user ERROR [ 66%]
tests/integration/test_auth_api.py::TestAuthAPI::test_unauthorized_access FAILED [ 73%]
tests/integration/test_students_api.py::TestStudentsAPI::test_create_student_success ERROR [ 80%]
tests/integration/test_students_api.py::TestStudentsAPI::test_create_student_without_auth PASSED [ 86%]
tests/integration/test_students_api.py::TestStudentsAPI::test_create_student_invalid_date ERROR [ 93%]
tests/integration/test_students_api.py::TestStudentsAPI::test_create_student_too_young ERROR [100%]

==================================== ERRORS ====================================
______ ERROR at setup of TestActivitiesAPI.test_generate_activity_success ______
tests/conftest.py:84: in test_user
    hashed_password=get_password_hash("testpass123"),
app/core/security.py:38: in get_password_hash
    return pwd_context.hash(password)
../venv/lib/python3.12/site-packages/passlib/context.py:2258: in hash
    return record.hash(secret, **kwds)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:779: in hash
    self.checksum = self._calc_checksum(secret)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:591: in _calc_checksum
    self._stub_requires_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2254: in _stub_requires_backend
    cls.set_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2156: in set_backend
    return owner.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2163: in set_backend
    return cls.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2188: in set_backend
    cls._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2311: in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2224: in _set_backend
    ok = loader(**kwds)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:626: in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:421: in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:380: in detect_wrap_bug
    if verify(secret, bug_hash):
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:792: in verify
    return consteq(self._calc_checksum(secret), chk)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:655: in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
E   ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[33m[WARNING][0m - 2025-11-11 10:41:31 - passlib.handlers.bcrypt - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
------------------------------ Captured log setup ------------------------------
WARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
___ ERROR at setup of TestActivitiesAPI.test_generate_activity_without_auth ____
tests/conftest.py:84: in test_user
    hashed_password=get_password_hash("testpass123"),
app/core/security.py:38: in get_password_hash
    return pwd_context.hash(password)
../venv/lib/python3.12/site-packages/passlib/context.py:2258: in hash
    return record.hash(secret, **kwds)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:779: in hash
    self.checksum = self._calc_checksum(secret)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:591: in _calc_checksum
    self._stub_requires_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2254: in _stub_requires_backend
    cls.set_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2156: in set_backend
    return owner.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2163: in set_backend
    return cls.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2188: in set_backend
    cls._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2311: in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2224: in _set_backend
    ok = loader(**kwds)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:626: in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:421: in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:380: in detect_wrap_bug
    if verify(secret, bug_hash):
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:792: in verify
    return consteq(self._calc_checksum(secret), chk)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:655: in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
E   ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[33m[WARNING][0m - 2025-11-11 10:42:11 - passlib.handlers.bcrypt - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
------------------------------ Captured log setup ------------------------------
WARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
_ ERROR at setup of TestActivitiesAPI.test_generate_activity_nonexistent_student _
tests/conftest.py:84: in test_user
    hashed_password=get_password_hash("testpass123"),
app/core/security.py:38: in get_password_hash
    return pwd_context.hash(password)
../venv/lib/python3.12/site-packages/passlib/context.py:2258: in hash
    return record.hash(secret, **kwds)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:779: in hash
    self.checksum = self._calc_checksum(secret)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:591: in _calc_checksum
    self._stub_requires_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2254: in _stub_requires_backend
    cls.set_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2156: in set_backend
    return owner.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2163: in set_backend
    return cls.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2188: in set_backend
    cls._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2311: in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2224: in _set_backend
    ok = loader(**kwds)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:626: in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:421: in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:380: in detect_wrap_bug
    if verify(secret, bug_hash):
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:792: in verify
    return consteq(self._calc_checksum(secret), chk)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:655: in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
E   ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[33m[WARNING][0m - 2025-11-11 10:42:20 - passlib.handlers.bcrypt - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
------------------------------ Captured log setup ------------------------------
WARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
_ ERROR at setup of TestActivitiesAPI.test_generate_activity_invalid_duration __
tests/conftest.py:84: in test_user
    hashed_password=get_password_hash("testpass123"),
app/core/security.py:38: in get_password_hash
    return pwd_context.hash(password)
../venv/lib/python3.12/site-packages/passlib/context.py:2258: in hash
    return record.hash(secret, **kwds)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:779: in hash
    self.checksum = self._calc_checksum(secret)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:591: in _calc_checksum
    self._stub_requires_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2254: in _stub_requires_backend
    cls.set_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2156: in set_backend
    return owner.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2163: in set_backend
    return cls.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2188: in set_backend
    cls._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2311: in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2224: in _set_backend
    ok = loader(**kwds)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:626: in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:421: in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:380: in detect_wrap_bug
    if verify(secret, bug_hash):
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:792: in verify
    return consteq(self._calc_checksum(secret), chk)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:655: in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
E   ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[33m[WARNING][0m - 2025-11-11 10:42:33 - passlib.handlers.bcrypt - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
------------------------------ Captured log setup ------------------------------
WARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
__ ERROR at setup of TestActivitiesAPI.test_generate_multiple_activity_types ___
tests/conftest.py:84: in test_user
    hashed_password=get_password_hash("testpass123"),
app/core/security.py:38: in get_password_hash
    return pwd_context.hash(password)
../venv/lib/python3.12/site-packages/passlib/context.py:2258: in hash
    return record.hash(secret, **kwds)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:779: in hash
    self.checksum = self._calc_checksum(secret)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:591: in _calc_checksum
    self._stub_requires_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2254: in _stub_requires_backend
    cls.set_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2156: in set_backend
    return owner.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2163: in set_backend
    return cls.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2188: in set_backend
    cls._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2311: in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2224: in _set_backend
    ok = loader(**kwds)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:626: in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:421: in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:380: in detect_wrap_bug
    if verify(secret, bug_hash):
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:792: in verify
    return consteq(self._calc_checksum(secret), chk)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:655: in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
E   ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[33m[WARNING][0m - 2025-11-11 10:42:43 - passlib.handlers.bcrypt - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
------------------------------ Captured log setup ------------------------------
WARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
_________ ERROR at setup of TestAuthAPI.test_register_duplicate_email __________
tests/conftest.py:84: in test_user
    hashed_password=get_password_hash("testpass123"),
app/core/security.py:38: in get_password_hash
    return pwd_context.hash(password)
../venv/lib/python3.12/site-packages/passlib/context.py:2258: in hash
    return record.hash(secret, **kwds)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:779: in hash
    self.checksum = self._calc_checksum(secret)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:591: in _calc_checksum
    self._stub_requires_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2254: in _stub_requires_backend
    cls.set_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2156: in set_backend
    return owner.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2163: in set_backend
    return cls.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2188: in set_backend
    cls._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2311: in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2224: in _set_backend
    ok = loader(**kwds)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:626: in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:421: in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:380: in detect_wrap_bug
    if verify(secret, bug_hash):
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:792: in verify
    return consteq(self._calc_checksum(secret), chk)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:655: in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
E   ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[33m[WARNING][0m - 2025-11-11 10:43:06 - passlib.handlers.bcrypt - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
------------------------------ Captured log setup ------------------------------
WARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
_______________ ERROR at setup of TestAuthAPI.test_login_success _______________
tests/conftest.py:84: in test_user
    hashed_password=get_password_hash("testpass123"),
app/core/security.py:38: in get_password_hash
    return pwd_context.hash(password)
../venv/lib/python3.12/site-packages/passlib/context.py:2258: in hash
    return record.hash(secret, **kwds)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:779: in hash
    self.checksum = self._calc_checksum(secret)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:591: in _calc_checksum
    self._stub_requires_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2254: in _stub_requires_backend
    cls.set_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2156: in set_backend
    return owner.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2163: in set_backend
    return cls.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2188: in set_backend
    cls._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2311: in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2224: in _set_backend
    ok = loader(**kwds)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:626: in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:421: in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:380: in detect_wrap_bug
    if verify(secret, bug_hash):
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:792: in verify
    return consteq(self._calc_checksum(secret), chk)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:655: in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
E   ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[33m[WARNING][0m - 2025-11-11 10:43:18 - passlib.handlers.bcrypt - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
------------------------------ Captured log setup ------------------------------
WARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
_________ ERROR at setup of TestAuthAPI.test_login_invalid_credentials _________
tests/conftest.py:84: in test_user
    hashed_password=get_password_hash("testpass123"),
app/core/security.py:38: in get_password_hash
    return pwd_context.hash(password)
../venv/lib/python3.12/site-packages/passlib/context.py:2258: in hash
    return record.hash(secret, **kwds)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:779: in hash
    self.checksum = self._calc_checksum(secret)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:591: in _calc_checksum
    self._stub_requires_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2254: in _stub_requires_backend
    cls.set_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2156: in set_backend
    return owner.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2163: in set_backend
    return cls.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2188: in set_backend
    cls._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2311: in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2224: in _set_backend
    ok = loader(**kwds)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:626: in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:421: in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:380: in detect_wrap_bug
    if verify(secret, bug_hash):
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:792: in verify
    return consteq(self._calc_checksum(secret), chk)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:655: in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
E   ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[33m[WARNING][0m - 2025-11-11 10:43:30 - passlib.handlers.bcrypt - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
------------------------------ Captured log setup ------------------------------
WARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
_____________ ERROR at setup of TestAuthAPI.test_get_current_user ______________
tests/conftest.py:84: in test_user
    hashed_password=get_password_hash("testpass123"),
app/core/security.py:38: in get_password_hash
    return pwd_context.hash(password)
../venv/lib/python3.12/site-packages/passlib/context.py:2258: in hash
    return record.hash(secret, **kwds)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:779: in hash
    self.checksum = self._calc_checksum(secret)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:591: in _calc_checksum
    self._stub_requires_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2254: in _stub_requires_backend
    cls.set_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2156: in set_backend
    return owner.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2163: in set_backend
    return cls.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2188: in set_backend
    cls._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2311: in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2224: in _set_backend
    ok = loader(**kwds)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:626: in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:421: in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:380: in detect_wrap_bug
    if verify(secret, bug_hash):
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:792: in verify
    return consteq(self._calc_checksum(secret), chk)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:655: in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
E   ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[33m[WARNING][0m - 2025-11-11 10:43:40 - passlib.handlers.bcrypt - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
------------------------------ Captured log setup ------------------------------
WARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
________ ERROR at setup of TestStudentsAPI.test_create_student_success _________
tests/conftest.py:84: in test_user
    hashed_password=get_password_hash("testpass123"),
app/core/security.py:38: in get_password_hash
    return pwd_context.hash(password)
../venv/lib/python3.12/site-packages/passlib/context.py:2258: in hash
    return record.hash(secret, **kwds)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:779: in hash
    self.checksum = self._calc_checksum(secret)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:591: in _calc_checksum
    self._stub_requires_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2254: in _stub_requires_backend
    cls.set_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2156: in set_backend
    return owner.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2163: in set_backend
    return cls.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2188: in set_backend
    cls._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2311: in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2224: in _set_backend
    ok = loader(**kwds)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:626: in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:421: in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:380: in detect_wrap_bug
    if verify(secret, bug_hash):
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:792: in verify
    return consteq(self._calc_checksum(secret), chk)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:655: in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
E   ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[33m[WARNING][0m - 2025-11-11 10:44:01 - passlib.handlers.bcrypt - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
------------------------------ Captured log setup ------------------------------
WARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
______ ERROR at setup of TestStudentsAPI.test_create_student_invalid_date ______
tests/conftest.py:84: in test_user
    hashed_password=get_password_hash("testpass123"),
app/core/security.py:38: in get_password_hash
    return pwd_context.hash(password)
../venv/lib/python3.12/site-packages/passlib/context.py:2258: in hash
    return record.hash(secret, **kwds)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:779: in hash
    self.checksum = self._calc_checksum(secret)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:591: in _calc_checksum
    self._stub_requires_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2254: in _stub_requires_backend
    cls.set_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2156: in set_backend
    return owner.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2163: in set_backend
    return cls.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2188: in set_backend
    cls._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2311: in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2224: in _set_backend
    ok = loader(**kwds)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:626: in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:421: in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:380: in detect_wrap_bug
    if verify(secret, bug_hash):
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:792: in verify
    return consteq(self._calc_checksum(secret), chk)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:655: in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
E   ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[33m[WARNING][0m - 2025-11-11 10:44:23 - passlib.handlers.bcrypt - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
------------------------------ Captured log setup ------------------------------
WARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
_______ ERROR at setup of TestStudentsAPI.test_create_student_too_young ________
tests/conftest.py:84: in test_user
    hashed_password=get_password_hash("testpass123"),
app/core/security.py:38: in get_password_hash
    return pwd_context.hash(password)
../venv/lib/python3.12/site-packages/passlib/context.py:2258: in hash
    return record.hash(secret, **kwds)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:779: in hash
    self.checksum = self._calc_checksum(secret)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:591: in _calc_checksum
    self._stub_requires_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2254: in _stub_requires_backend
    cls.set_backend()
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2156: in set_backend
    return owner.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2163: in set_backend
    return cls.set_backend(name, dryrun=dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2188: in set_backend
    cls._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2311: in _set_backend
    super(SubclassBackendMixin, cls)._set_backend(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:2224: in _set_backend
    ok = loader(**kwds)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:626: in _load_backend_mixin
    return mixin_cls._finalize_backend_mixin(name, dryrun)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:421: in _finalize_backend_mixin
    if detect_wrap_bug(IDENT_2A):
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:380: in detect_wrap_bug
    if verify(secret, bug_hash):
../venv/lib/python3.12/site-packages/passlib/utils/handlers.py:792: in verify
    return consteq(self._calc_checksum(secret), chk)
../venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py:655: in _calc_checksum
    hash = _bcrypt.hashpw(secret, config)
E   ValueError: password cannot be longer than 72 bytes, truncate manually if necessary (e.g. my_password[:72])
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
[33m[WARNING][0m - 2025-11-11 10:44:33 - passlib.handlers.bcrypt - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
------------------------------ Captured log setup ------------------------------
WARNING  passlib.handlers.bcrypt:bcrypt.py:622 (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
=================================== FAILURES ===================================
____________________ TestAuthAPI.test_register_user_success ____________________
../venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1969: in _exec_single_context
    self.dialect.do_execute(
../venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:922: in do_execute
    cursor.execute(statement, parameters)
E   psycopg2.errors.UndefinedTable: relation "users" does not exist
E   LINE 2: FROM users 
E                ^

The above exception was the direct cause of the following exception:
tests/integration/test_auth_api.py:14: in test_register_user_success
    response = client.post(
../venv/lib/python3.12/site-packages/starlette/testclient.py:590: in post
    return super().post(
../venv/lib/python3.12/site-packages/httpx/_client.py:1132: in post
    return self.request(
../venv/lib/python3.12/site-packages/starlette/testclient.py:465: in request
    return super().request(
../venv/lib/python3.12/site-packages/httpx/_client.py:814: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../venv/lib/python3.12/site-packages/httpx/_client.py:901: in send
    response = self._send_handling_auth(
../venv/lib/python3.12/site-packages/httpx/_client.py:929: in _send_handling_auth
    response = self._send_handling_redirects(
../venv/lib/python3.12/site-packages/httpx/_client.py:966: in _send_handling_redirects
    response = self._send_single_request(request)
../venv/lib/python3.12/site-packages/httpx/_client.py:1002: in _send_single_request
    response = transport.handle_request(request)
../venv/lib/python3.12/site-packages/starlette/testclient.py:342: in handle_request
    raise exc
../venv/lib/python3.12/site-packages/starlette/testclient.py:339: in handle_request
    portal.call(self.app, scope, receive, send)
../venv/lib/python3.12/site-packages/anyio/from_thread.py:277: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/usr/lib/python3.12/concurrent/futures/_base.py:456: in result
    return self.__get_result()
/usr/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
    raise self._exception
../venv/lib/python3.12/site-packages/anyio/from_thread.py:217: in _call_func
    retval = await retval
../venv/lib/python3.12/site-packages/fastapi/applications.py:1106: in __call__
    await super().__call__(scope, receive, send)
../venv/lib/python3.12/site-packages/starlette/applications.py:122: in __call__
    await self.middleware_stack(scope, receive, send)
../venv/lib/python3.12/site-packages/starlette/middleware/errors.py:184: in __call__
    raise exc
../venv/lib/python3.12/site-packages/starlette/middleware/errors.py:162: in __call__
    await self.app(scope, receive, _send)
../venv/lib/python3.12/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:157: in log_requests
    response = await call_next(request)
../venv/lib/python3.12/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../venv/lib/python3.12/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../venv/lib/python3.12/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:143: in add_security_headers
    response = await call_next(request)
../venv/lib/python3.12/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../venv/lib/python3.12/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../venv/lib/python3.12/site-packages/starlette/middleware/base.py:108: in __call__
    response = await self.dispatch_func(request, call_next)
app/main.py:132: in add_process_time_header
    response = await call_next(request)
../venv/lib/python3.12/site-packages/starlette/middleware/base.py:84: in call_next
    raise app_exc
../venv/lib/python3.12/site-packages/starlette/middleware/base.py:70: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../venv/lib/python3.12/site-packages/starlette/middleware/gzip.py:24: in __call__
    await responder(scope, receive, send)
../venv/lib/python3.12/site-packages/starlette/middleware/gzip.py:44: in __call__
    await self.app(scope, receive, self.send_with_gzip)
../venv/lib/python3.12/site-packages/starlette/middleware/cors.py:83: in __call__
    await self.app(scope, receive, send)
../venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py:79: in __call__
    raise exc
../venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py:68: in __call__
    await self.app(scope, receive, sender)
../venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py:20: in __call__
    raise e
../venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py:17: in __call__
    await self.app(scope, receive, send)
../venv/lib/python3.12/site-packages/starlette/routing.py:718: in __call__
    await route.handle(scope, receive, send)
../venv/lib/python3.12/site-packages/starlette/routing.py:276: in handle
    await self.app(scope, receive, send)
../venv/lib/python3.12/site-packages/starlette/routing.py:66: in app
    response = await func(request)
../venv/lib/python3.12/site-packages/fastapi/routing.py:274: in app
    raw_response = await run_endpoint_function(
../venv/lib/python3.12/site-packages/fastapi/routing.py:191: in run_endpoint_function
    return await dependant.call(**values)
app/api/routes/auth.py:163: in register
    existing_user = db.query(User).filter(User.email == user_data.email).first()
../venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py:2748: in first
    return self.limit(1)._iter().first()  # type: ignore
../venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py:2847: in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
../venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2308: in execute
    return self._execute_internal(
../venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
../venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py:293: in orm_execute_statement
    result = conn.execute(
../venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1416: in execute
    return meth(
../venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:516: in _execute_on_connection
    return connection._execute_clauseelement(
../venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
../venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1848: in _execute_context
    return self._exec_single_context(
../venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
../venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2343: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
../venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1969: in _exec_single_context
    self.dialect.do_execute(
../venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:922: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "users" does not exist
E   LINE 2: FROM users 
E                ^
E   
E   [SQL: SELECT users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.phone AS users_phone, users.avatar_url AS users_avatar_url, users.bio AS users_bio, users.institution AS users_institution, users.last_login AS users_last_login, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.verification_token AS users_verification_token, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
E   FROM users 
E   WHERE users.email = %(email_1)s 
E    LIMIT %(param_1)s]
E   [parameters: {'email_1': 'newuser@example.com', 'param_1': 1}]
E   (Background on this error at: https://sqlalche.me/e/20/f405)
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
----------------------------- Captured stdout call -----------------------------
üì• POST /api/v1/auth/register
‚ùå Unhandled error: (psycopg2.errors.UndefinedTable) relation "users" does not exist
LINE 2: FROM users 
             ^

[SQL: SELECT users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.phone AS users_phone, users.avatar_url AS users_avatar_url, users.bio AS users_bio, users.institution AS users_institution, users.last_login AS users_last_login, users.reset_token AS users_reset_token, users.reset_token_expires AS users_reset_token_expires, users.verification_token AS users_verification_token, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'email_1': 'newuser@example.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
--------------------------- Captured stdout teardown ---------------------------
üõë Shutting down EduAutismo IA API
_____________________ TestAuthAPI.test_unauthorized_access _____________________
tests/integration/test_auth_api.py:92: in test_unauthorized_access
    assert response.status_code == 403
E   assert 401 == 403
E    +  where 401 = <Response [401 Unauthorized]>.status_code
---------------------------- Captured stdout setup -----------------------------
üöÄ Starting EduAutismo IA API
üìç Environment: development
üîß Debug Mode: True
‚ö†Ô∏è  Database initialization warning: (psycopg2.OperationalError) could not translate host name "postgres" to address: Temporary failure in name resolution

(Background on this error at: https://sqlalche.me/e/20/e3q8)
----------------------------- Captured stdout call -----------------------------
üì• GET /api/v1/auth/me
üì§ Status: 401
[32m[INFO][0m - 2025-11-11 10:43:53 - httpx - HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 401 Unauthorized"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1013 HTTP Request: GET http://testserver/api/v1/auth/me "HTTP/1.1 401 Unauthorized"
--------------------------- Captured stdout teardown ---------------------------
üõë Shutting down EduAutismo IA API
=============================== warnings summary ===============================
../venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:268
../venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:268
  /mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:268: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

app/core/database.py:20
  /mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/backend/app/core/database.py:20: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

app/db/base.py:18
  /mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/backend/app/db/base.py:18: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

../venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
  /mnt/d/ENGINEER/VS_Code/eduautismo-ia-mvp/venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
    from crypt import crypt as _crypt

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/integration/test_auth_api.py::TestAuthAPI::test_register_user_success
FAILED tests/integration/test_auth_api.py::TestAuthAPI::test_unauthorized_access
ERROR tests/integration/test_activities_api.py::TestActivitiesAPI::test_generate_activity_success
ERROR tests/integration/test_activities_api.py::TestActivitiesAPI::test_generate_activity_without_auth
ERROR tests/integration/test_activities_api.py::TestActivitiesAPI::test_generate_activity_nonexistent_student
ERROR tests/integration/test_activities_api.py::TestActivitiesAPI::test_generate_activity_invalid_duration
ERROR tests/integration/test_activities_api.py::TestActivitiesAPI::test_generate_multiple_activity_types
ERROR tests/integration/test_auth_api.py::TestAuthAPI::test_register_duplicate_email
ERROR tests/integration/test_auth_api.py::TestAuthAPI::test_login_success - V...
ERROR tests/integration/test_auth_api.py::TestAuthAPI::test_login_invalid_credentials
ERROR tests/integration/test_auth_api.py::TestAuthAPI::test_get_current_user
ERROR tests/integration/test_students_api.py::TestStudentsAPI::test_create_student_success
ERROR tests/integration/test_students_api.py::TestStudentsAPI::test_create_student_invalid_date
ERROR tests/integration/test_students_api.py::TestStudentsAPI::test_create_student_too_young
======== 2 failed, 1 passed, 5 warnings, 12 errors in 194.78s (0:03:14) ========
